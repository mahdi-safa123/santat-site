<!DOCTYPE html>
<!-- saved from url=(0161)file:///C:/Users/lenovo/Desktop/111%D9%86%D8%B8%D8%A7%D9%85%20%D8%A7%D9%84%D9%86%D9%82%D8%A7%D8%B7%20-%20%D9%85%D9%88%D9%82%D8%B9%20%D8%AC%D8%AF%D9%8A%D8%AF.html -->
<html lang="ar"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>ูุธุงู ุงูููุงุท - ูููุน ุฌุฏูุฏ</title>
  <style>
body {
  font-family: Arial, sans-serif;
  direction: rtl;
  padding: 20px;
  background-color: #121212;
  color: #ffffff;
}
.card {
  background: #1e1e1e;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
  margin-bottom: 20px;
}
input, button {
  padding: 10px;
  margin: 5px 0;
  font-size: 16px;
  width: 300px;
  background-color: #2a2a2a;
  color: #ffffff;
  border: 1px solid #444;
}
button {
  margin-left: 10px;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
  background-color: #2a2a2a;
  color: #ffffff;
}
th, td {
  border: 1px solid #444;
  padding: 10px;
  text-align: center;
}
th {
  background-color: #333;
  color: #fff;
}
#notification {
  background: #1e4620;
  border: 1px solid #4caf50;
  color: #b2fab4;
  font-weight: bold;
  padding: 10px;
  margin-bottom: 15px;
}
.review-button {
  background-color: #388e3c;
  color: white;
  border: none;
  padding: 10px 18px;
  font-size: 16px;
  cursor: pointer;
}
.review-button:disabled {
  background-color: #555;
  cursor: not-allowed;
}

#auditLogTable td {
  background-color: #1a1a1a;
  border: 1px solid #555;
  padding: 10px;
  border-radius: 6px;
  font-weight: bold;
}
#auditLogTable td[contenteditable="true"] {
  background-color: #262626;
}

</style>
</head>
<body>
  
<h1 style="text-align:center; font-size:32px; color:#222; margin-bottom:20px;">๐ช ุดุฑุงุก ููุงุท ุณูุชุงุช</h1>

<div class="card" style="text-align:center; background:#222; border:1px solid #4caf50; max-width:400px; margin: 0 auto 20px;">
  <h2 style="color:#4caf50;">๐ฐ ุฑุตูุฏ ุงููุงุตุฉ</h2>
  <input type="text" id="safeAmount" value="0" style="width: 300px; font-size: 28px; text-align:center; font-weight:bold;">
</div>

<h2>๐งฎ ูุธุงู ุงูููุงุท (ูุนุงุฏูุฉ ุฌุฏูุฏุฉ)</h2>

  <div id="notification">โ ุชู ุงุญุชุณุงุจ ุงูุณุนุฑ ูุฅุถุงูุชู ุฅูู ุงูุณุฌู ุจูุฌุงุญ.</div>

  <div class="card">
    ๐ค ุงุณู ุงููุญุงุณุจ: <input type="text" id="accountant"><br>

    ๐ฅ ุงุณู ุงููุณุชุฎุฏู: <input type="text" id="username"><br>
    ๐ข ุฑูุฒ ุงูุฅุญุงูุฉ: <input type="text" id="ref"><br>
    ๐ฌ ุนุฏุฏ ุงูููุงุท: <input type="text" id="points"><br>
    <button onclick="calculateAndSave()">ุงุญุณุจ ุงูุณุนุฑ ูุฃุถู ููุณุฌู</button>
    <button id="reviewBtn" class="review-button" onclick="handleReview()" disabled="">โ๏ธ ุชุฏููู</button>
    <div id="result" style="margin-top:10px;font-weight:bold;">434,267 ุฏููุงุฑ</div>
  </div>

  <div class="card">
    <h3>๐ ุงูุณุฌู</h3>
    <table id="logTable">
      <thead>
        <tr>
          <th>ุงูุชุงุฑูุฎ</th>
          <th>ุงุณู ุงููุณุชุฎุฏู</th>
          <th>ุฑูุฒ ุงูุฅุญุงูุฉ</th>
          <th>ุงูููุงุท</th>
          <th>ุงูุณุนุฑ</th>
          <th>ูุฑุงุฌุนุฉ</th>
        </tr>
      </thead>
      <tbody><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูกูข:ูขูฃ ู</td>
    <td>ุงูุจุตุฑุงููู</td>
    <td>13122114723</td>
    <td>1,644,950</td>
    <td>434,267</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูกูก:ูฃูจ ู</td>
    <td>ุฒููุฑ</td>
    <td>21022295347</td>
    <td>1,310,103</td>
    <td>345,867</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูง:ููฅ:ูคูฆ ู</td>
    <td>ุณูู</td>
    <td>04122095791</td>
    <td>1,000,000</td>
    <td>264,000</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูง:ููฅ:ููฃ ู</td>
    <td>ุงูุจุตุฑุงูู</td>
    <td>11032334091</td>
    <td>3,900,000</td>
    <td>1,029,600</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูู:ูฅูฅ ู</td>
    <td>ูุงูู ุงูุดุฑููู</td>
    <td>04042390934</td>
    <td>700,000</td>
    <td>184,800</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูู:ููฃ ู</td>
    <td>ุงูุณููุฑ</td>
    <td>27112081461</td>
    <td>700,000</td>
    <td>184,800</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฅูฉ:ูกูฅ ู</td>
    <td>ุนูู ุงูุดุฑููู</td>
    <td>03042388647</td>
    <td>700,000</td>
    <td>184,800</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูคูข:ูขูจ ู</td>
    <td>ุณุฌุงุฏ ุงูุงุณุฏู</td>
    <td>08071686815</td>
    <td>600,000</td>
    <td>158,400</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูฅ:ูฃูจ ู</td>
    <td>ูุถู ุตุงูุญ</td>
    <td>08041435019</td>
    <td>242,465</td>
    <td>64,011</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูค:ูฅูจ ู</td>
    <td>ุตุงูุญ ูุบุงูุณ</td>
    <td>29091950958</td>
    <td>707,200</td>
    <td>186,701</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูค:ููฃ ู</td>
    <td>ูุถู ุตุงูุญ</td>
    <td>22102000834</td>
    <td>1,874,312</td>
    <td>494,818</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูคูก:ูขู ู</td>
    <td>ุญุณููู ุงููุฑูุงุชู</td>
    <td>1409675901</td>
    <td>560,000</td>
    <td>147,840</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูจ:ูฅูฆ ู</td>
    <td>HAYDAR</td>
    <td>2910868918</td>
    <td>1,349,000</td>
    <td>356,136</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูง:ูฅูจ ู</td>
    <td>karar</td>
    <td>18051534369</td>
    <td>2,439,600</td>
    <td>644,054</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃู:ูคู ู</td>
    <td>ุชุตููุฑ ุญุงุณุจู ุญูุฑุงุก </td>
    <td>80</td>
    <td>7</td>
    <td>2</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃู:ูขูข ู</td>
    <td>ุชุตููุฑ ุญุงุณุจู ุญูุฑุงุก </td>
    <td>80</td>
    <td>1,200</td>
    <td>317</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃู:ูู ู</td>
    <td>ุชุตููุฑ ุญุงุณุจู ุญูุฑุงุก </td>
    <td>80</td>
    <td>117,424</td>
    <td>31,000</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูขูฉ:ูกูฅ ู</td>
    <td>ุชุตููุฑ ุญุงุณุจู ุญูุฑุงุก </td>
    <td>80</td>
    <td>2,000,000</td>
    <td>528,000</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูขูจ:ูฃูฅ ู</td>
    <td>ุชุตููุฑ ุญุงุณุจู ุญูุฑุงุก </td>
    <td>80</td>
    <td>15,516,666</td>
    <td>4,096,400</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูค:ูขูค:ูฃูฉ ู</td>
    <td>hamld</td>
    <td>12091910673</td>
    <td>718,549</td>
    <td>189,697</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกูค:ููก ู</td>
    <td>ูุญูุฏ ุงูุจุตุฑุงูู </td>
    <td>24111041014</td>
    <td>8,901,607</td>
    <td>2,350,024</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกูข:ููก ู</td>
    <td>ุฐู ุงูุฌูุงู ูุงูุงูุฑุงู</td>
    <td>0411919633</td>
    <td>1,742,430</td>
    <td>460,002</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกู:ูคูฃ ู</td>
    <td>zoN</td>
    <td>2205409841</td>
    <td>127,431</td>
    <td>33,642</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูข:ููฉ:ูขูฃ ู</td>
    <td>ูุณุฑู</td>
    <td>1808578403</td>
    <td>410,000</td>
    <td>108,240</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูข:ููจ:ูฃูจ ู</td>
    <td>ุฑูุญุงูู</td>
    <td>09121117671</td>
    <td>375,000</td>
    <td>99,000</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูค:ููจ ู</td>
    <td>ุฎูุงุชู </td>
    <td>20011222980</td>
    <td>1,105,000</td>
    <td>291,720</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูข:ูฃูจ ู</td>
    <td>ุณูุฏ ูููุฐ </td>
    <td>1808577798</td>
    <td>2,429,259</td>
    <td>641,324</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅู:ูขูฆ ู</td>
    <td>ุณูุฏ ูููุฐ </td>
    <td>1808577798</td>
    <td>24,292,559</td>
    <td>6,413,236</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅู:ูู ู</td>
    <td>ุณูุฏ ูููุฐ </td>
    <td>1808577798</td>
    <td>268,500</td>
    <td>70,884</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูฉ:ูกู ู</td>
    <td>ุนูู ุงุณูุงุนูู  </td>
    <td>01031355178</td>
    <td>1,717,070</td>
    <td>453,306</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูจ:ูฃูฃ ู</td>
    <td>ุซุงูุฑ ุงูุจุตุฑุงูู </td>
    <td>25052611046</td>
    <td>3,308,369</td>
    <td>873,409</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูก:ูฅูฉ ู</td>
    <td>ุนูุงุฑ ุนูู</td>
    <td>15061600960</td>
    <td>3,112,551</td>
    <td>821,713</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคู:ูฅูก ู</td>
    <td>ุญุณูู ุจุดูุฑ</td>
    <td>05022246570</td>
    <td>740,000</td>
    <td>195,360</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูฉ:ูคูฆ ู</td>
    <td>ุจูุงุก ุณููุงู </td>
    <td>17071725313</td>
    <td>1,140,000</td>
    <td>300,960</td>
    <td>โ</td>
  </tr><tr>
    <td>ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูจ:ูขูฆ ู</td>
    <td>ุงุญูุฏ ูุงุฌุฏ</td>
    <td>12071704671</td>
    <td>250,000</td>
    <td>66,000</td>
    <td>โ</td>
  </tr></tbody>
    </table>
  </div>

  <div class="card">
    <h3>๐ ุณุฌู ุงูุชุฏููู</h3>
    <table id="auditLogTable">
      <thead>
        <tr>
          <th>ุงูุชุงุฑูุฎ</th>
          <th>ุงุณู ุงููุณุชุฎุฏู</th>
          <th>ุฑูุฒ ุงูุฅุญุงูุฉ</th>
          <th>ุงูููุงุท</th>
          <th>ุงูุณุนุฑ</th>
          <th>ูุฑุงุฌุนุฉ</th>
          <th>ุงุณู ุงููุญุงุณุจ</th>
        </tr>
      </thead>
      <tbody><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูกูข:ูขูฆ ู</td>
    <td contenteditable="true">ุงูุจุตุฑุงููู</td>
    <td contenteditable="true">13122114723</td>
    <td contenteditable="true">1,644,950</td>
    <td contenteditable="true">434,267</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูกูก:ูคูก ู</td>
    <td contenteditable="true">ุฒููุฑ ุงูุจุตุฑุงูู</td>
    <td contenteditable="true">21022295347 ุฎุทุง ูู ุงูุญุณุงุจ</td>
    <td contenteditable="true">1,310,103</td>
    <td contenteditable="true">345,867</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ููฅ:ูคูง ู</td>
    <td contenteditable="true">ุณูู</td>
    <td contenteditable="true">04122095791</td>
    <td contenteditable="true">1,000,000</td>
    <td contenteditable="true">264,000</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ููฅ:ููฆ ู</td>
    <td contenteditable="true">ุงูุจุตุฑุงูู</td>
    <td contenteditable="true">11032334091</td>
    <td contenteditable="true">3,900,000</td>
    <td contenteditable="true">1,029,600</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูู:ูฅูง ู</td>
    <td contenteditable="true">ูุงูู ุงูุดุฑููู</td>
    <td contenteditable="true">04042390934</td>
    <td contenteditable="true">700,000</td>
    <td contenteditable="true">184,800</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูู:ููง ู</td>
    <td contenteditable="true">ุงูุณููุฑ</td>
    <td contenteditable="true">27112081461</td>
    <td contenteditable="true">700,000</td>
    <td contenteditable="true">184,800</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฅูฉ:ูขูจ ู</td>
    <td contenteditable="true">ุนูู ุงูุดุฑููู</td>
    <td contenteditable="true">03042388647</td>
    <td contenteditable="true">700,000</td>
    <td contenteditable="true">184,800</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูคูฃ:ูฃูข ู</td>
    <td contenteditable="true">ุณุฌุงุฏ ุงูุงุณุฏู</td>
    <td contenteditable="true">08071686815</td>
    <td contenteditable="true">600,000</td>
    <td contenteditable="true">158,400</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูฅ:ูคู ู</td>
    <td contenteditable="true">ูุถู ุตุงูุญ</td>
    <td contenteditable="true">08041435019</td>
    <td contenteditable="true">242,465</td>
    <td contenteditable="true">64,011</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูฅ:ููข ู</td>
    <td contenteditable="true">ุตุงูุญ ูุบุงูุณ</td>
    <td contenteditable="true">29091950958</td>
    <td contenteditable="true">707,200</td>
    <td contenteditable="true">186,701</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูค:ููจ ู</td>
    <td contenteditable="true">ูุถู ุตุงูุญ</td>
    <td contenteditable="true">22102000834</td>
    <td contenteditable="true">1,874,312</td>
    <td contenteditable="true">494,818</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูคูข:ูขูฆ ู</td>
    <td contenteditable="true">ุญุณููู ุงููุฑูุงุชู</td>
    <td contenteditable="true">1409675901</td>
    <td contenteditable="true">560,000</td>
    <td contenteditable="true">147,840</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูฉ:ูู ู</td>
    <td contenteditable="true">HAYDAR</td>
    <td contenteditable="true">2910868918</td>
    <td contenteditable="true">1,349,000</td>
    <td contenteditable="true">356,136</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูจ:ููก ู</td>
    <td contenteditable="true">karar</td>
    <td contenteditable="true">18051534369</td>
    <td contenteditable="true">2,439,600</td>
    <td contenteditable="true">644,054</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูค:ูขูฆ:ููฃ ู</td>
    <td contenteditable="true">hamld</td>
    <td contenteditable="true">12091910673</td>
    <td contenteditable="true">718,549</td>
    <td contenteditable="true">189,697</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกูค:ููฅ ู</td>
    <td contenteditable="true">ูุญูุฏ ุงูุจุตุฑุงูู </td>
    <td contenteditable="true">24111041014</td>
    <td contenteditable="true">8,901,607</td>
    <td contenteditable="true">2,350,024</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกูข:ููจ ู</td>
    <td contenteditable="true">ุฐู ุงูุฌูุงู ูุงูุงูุฑุงู</td>
    <td contenteditable="true">0411919633</td>
    <td contenteditable="true">1,742,430</td>
    <td contenteditable="true">460,002</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกู:ูคูจ ู</td>
    <td contenteditable="true">zoN</td>
    <td contenteditable="true">2205409841</td>
    <td contenteditable="true">127,431</td>
    <td contenteditable="true">33,642</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ููฉ:ูคูฃ ู</td>
    <td contenteditable="true">ูุณุฑู</td>
    <td contenteditable="true">1808578403</td>
    <td contenteditable="true">410,000</td>
    <td contenteditable="true">108,240</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ููจ:ูคูก ู</td>
    <td contenteditable="true">ุฑูุญุงูู</td>
    <td contenteditable="true">09121117671</td>
    <td contenteditable="true">375,000</td>
    <td contenteditable="true">99,000</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูค:ูกู ู</td>
    <td contenteditable="true">ุฎูุงุชู </td>
    <td contenteditable="true">20011222980</td>
    <td contenteditable="true">1,105,000</td>
    <td contenteditable="true">291,720</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูข:ูคูข ู</td>
    <td contenteditable="true">ุณูุฏ ูููุฐ </td>
    <td contenteditable="true">1808577798</td>
    <td contenteditable="true">2,429,259</td>
    <td contenteditable="true">641,324</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅู:ููก ู</td>
    <td contenteditable="true">ุณูุฏ ูููุฐ </td>
    <td contenteditable="true">1808577798</td>
    <td contenteditable="true">268,500</td>
    <td contenteditable="true">70,884</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูฉ:ูกูข ู</td>
    <td contenteditable="true">ุนูู ุงุณูุงุนูู  </td>
    <td contenteditable="true">01031355178</td>
    <td contenteditable="true">1,717,070</td>
    <td contenteditable="true">453,306</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูจ:ูฃูฅ ู</td>
    <td contenteditable="true">ุซุงูุฑ ุงูุจุตุฑุงูู </td>
    <td contenteditable="true">25052611046</td>
    <td contenteditable="true">3,308,369</td>
    <td contenteditable="true">873,409</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูข:ููก ู</td>
    <td contenteditable="true">ุนูุงุฑ ุนูู</td>
    <td contenteditable="true">15061600960</td>
    <td contenteditable="true">3,112,551</td>
    <td contenteditable="true">821,713</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคู:ูฅูฉ ู</td>
    <td contenteditable="true">ุญุณูู ุจุดูุฑ</td>
    <td contenteditable="true">05022246570</td>
    <td contenteditable="true">740,000</td>
    <td contenteditable="true">195,360</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูฉ:ูฅู ู</td>
    <td contenteditable="true">ุจูุงุก ุณููุงู </td>
    <td contenteditable="true">17071725313</td>
    <td contenteditable="true">1,140,000</td>
    <td contenteditable="true">300,960</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูจ:ูฃูฉ ู</td>
    <td contenteditable="true">ุงุญูุฏ ูุงุฌุฏ</td>
    <td contenteditable="true">12071704671</td>
    <td contenteditable="true">250,000</td>
    <td contenteditable="true">66,000</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr></tbody>
    </table>
    <h4>๐ ูุฌููุน ููุงุท ุงูุชุฏููู: <span id="auditPointsSum">44,073,396</span></h4>
    <h4>๐ฐ ูุฌููุน ุงูุณุนุฑ: <span id="auditTotalPrice">11,635,375</span> ุฏููุงุฑ</h4>
    <div style="text-align:center; margin-top:15px;">
      <button onclick="printAuditOnly()">๐จ๏ธ ุทุจุงุนุฉ ุณุฌู ุงูุชุฏููู ููุท</button>
    </div>
  </div>

    <div style="text-align:center; margin-top:15px;">
      <button onclick="saveAuditLog()">๐พ ุญูุธ ุณุฌู ุงูุชุฏููู</button>
    </div>



  <div class="card">
    <h3>๐ ุณุฌู ุญุฑูุงุช ุงููุงุตุฉ</h3>
    ๐ค ุงููุญุงุณุจ ุงููุณุคูู: <input type="text" id="safeSource" placeholder="ูุซูุงู: ุฃุญูุฏ"><br>
    ๐ฐ ูุจูุบ ุงูุฅุถุงูุฉ: <input type="text" id="safeAddAmount" placeholder="ูุซูุงู: 100000"><br>
    <button onclick="addSafeLog()">โ ุฅุถุงูุฉ ุฑุตูุฏ ุฅูู ุงููุงุตุฉ</button>

    <table id="safeLogTable" style="margin-top:20px;">
      <thead>
        <tr>
          <th>ุงูุชุงุฑูุฎ</th>
          <th>ุงูุนูููุฉ</th>
          <th>ุงููุจูุบ</th>
          <th>ุงููุตุฏุฑ</th>
        </tr>
      </thead>
      <tbody><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูกูข:ูขูฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">434,267</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูกูก:ูฃูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">345,867</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ููฅ:ูคูฆ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">264,000</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ููฅ:ููฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">1,029,600</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูู:ูฅูฅ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">184,800</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูง:ูู:ููฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">184,800</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฅูฉ:ูกูฅ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">184,800</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฅูฃ:ูฅูข ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">2,500,000</td>
    <td contenteditable="true">ุนูู ุตูุงุก</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูคูข:ูขูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">158,400</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูฅ:ูฃูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">64,011</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูค:ูฅูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">186,701</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฆ:ูฃูค:ููฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">494,818</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฅูก:ูกูค ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">1,649,000</td>
    <td contenteditable="true">ุนูู ุตูุงุก</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูคูก:ูขู ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">147,840</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูจ:ูฅูฆ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">356,136</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูง:ูฅูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">644,054</td>
    <td contenteditable="true">ุจููู ูุตู</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูฅ:ูฅูจ ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">1,000,000</td>
    <td contenteditable="true">ุนูู ุตูุงุก</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃูฅ:ูขูฆ ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">1,000,000</td>
    <td contenteditable="true">ุนูู ุตูุงุก</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃู:ูคู ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">2</td>
    <td contenteditable="true">ููุฏู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃู:ูขูข ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">317</td>
    <td contenteditable="true">ููุฏู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูฃู:ูู ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">31,000</td>
    <td contenteditable="true">ููุฏู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูขูฉ:ูกูฅ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">528,000</td>
    <td contenteditable="true">ููุฏู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูขูจ:ูฃูฅ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">4,096,400</td>
    <td contenteditable="true">ููุฏู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูฅ:ูขูฅ:ูคูฉ ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">8,000</td>
    <td contenteditable="true">ูุณุจู ุงููุณูุฑ</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูค:ูขูค:ูฃูฉ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">189,697</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกูค:ููก ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">2,350,024</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกูข:ููก ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">460,002</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ูกู:ูคูฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">33,642</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ููฉ:ูขูฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">108,240</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูข:ููจ:ูฃูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">99,000</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูค:ููจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">291,720</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูข:ูฃูจ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">641,324</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅูข:ูขูก ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">6,413,236</td>
    <td contenteditable="true">ุบูุท ุจ ุงุณู ุณูุฏ ูููุฐ</td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅู:ูขูฆ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">6,413,236</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฅู:ูู ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">70,884</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูฉ:ูกู ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">453,306</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูจ:ูฃูฃ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">873,409</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคูก:ูฅูฉ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">821,713</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูคู:ูฅูก ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">195,360</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูฉ:ูคูฆ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">300,960</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูจ:ูขูฆ ู</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">66,000</td>
    <td contenteditable="true">ุญูุฑุงุก ุนูู </td>
  </tr><tr>
    <td contenteditable="true">ูฃูโ/ูฆโ/ูขููขูฅ ูก:ูฃูค:ููฉ ู</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">11,603,000</td>
    <td contenteditable="true">ููุฏู</td>
  </tr></tbody>
    </table>
  </div>


<script>
let reviewUsed = false;

function calculateAndSave() {
  const username = document.getElementById("username").value;
  const ref = document.getElementById("ref").value;
  const accountant = document.getElementById("accountant").value;
  const pointsInput = document.getElementById("points");
  const points = parseInt(pointsInput.value.replace(/[^\d]/g, "")) || 0;
  const resultElem = document.getElementById("result");
  const notifyElem = document.getElementById("notification");
  notifyElem.textContent = "";

  if (!points || points <= 0) {
    resultElem.innerText = "โ ูุฑุฌู ุฅุฏุฎุงู ุนุฏุฏ ููุงุท ุตุญูุญ.";
    return;
  }

  const price = Math.round((points / 5000) * 1320);
  const safeInput = document.getElementById("safeAmount");
  let safeAmount = parseInt(safeInput.value.replace(/[^\d]/g, "")) || 0;

  if (price > safeAmount) {
    resultElem.innerText = "โ ูุง ููุฌุฏ ุฑุตูุฏ ูุงูู ูู ุงููุงุตุฉ.";
    return;
  }

  
// ุงุณุชูุทุงุน ุงูุณุนุฑ ูู ุงููุงุตุฉ
  safeAmount -= price;
  safeInput.value = safeAmount.toLocaleString();

  resultElem.innerText = price.toLocaleString() + " ุฏููุงุฑ";
  notifyElem.textContent = "โ ุชู ุงุญุชุณุงุจ ุงูุณุนุฑ ูุฅุถุงูุชู ุฅูู ุงูุณุฌู ุจูุฌุงุญ.";

  const table = document.querySelector("#logTable tbody");
  const row = document.createElement("tr");
  row.innerHTML = `
    <td>${new Date().toLocaleString("ar-EG")}</td>
    <td>${username}</td>
    <td>${ref}</td>
    <td>${points.toLocaleString()}</td>
    <td>${price.toLocaleString()}</td>
    <td>โ</td>
  `;
  table.insertBefore(row, table.firstChild);
  reviewUsed = false;
  document.getElementById("reviewBtn").disabled = false;
  pointsInput.value = "";
}

function handleReview() {
  if (reviewUsed) return;
  markReviewed();
  document.getElementById("reviewBtn").disabled = true;
  reviewUsed = true;
}

function markReviewed() {
  const table = document.querySelector("#logTable tbody");
  const auditTable = document.querySelector("#auditLogTable tbody");
  const firstRow = table.rows[0];
  if (!firstRow) return;

  const cols = Array.from(firstRow.cells).map(td => td.textContent);
  const accountant = document.getElementById("accountant").value;

  const auditRow = document.createElement("tr");
  auditRow.innerHTML = `
    <td contenteditable="true">${new Date().toLocaleString("ar-EG")}</td>
    <td contenteditable="true">${cols[1]}</td>
    <td contenteditable="true">${cols[2]}</td>
    <td contenteditable="true">${cols[3]}</td>
    <td contenteditable="true">${cols[4]}</td>
    <td contenteditable="true">โ</td>
    <td contenteditable="true">${accountant}</td>
  `;
  auditTable.insertBefore(auditRow, auditTable.firstChild);
  updateAuditPointsSum();
}

function updateAuditPointsSum() {
  const rows = document.querySelectorAll("#auditLogTable tbody tr");
  let total = 0;
  rows.forEach(row => {
    const pts = row.cells[3]?.textContent?.replace(/[^\d]/g, "") || "0";
    total += parseInt(pts) || 0;
  });
  document.getElementById("auditPointsSum").textContent = total.toLocaleString();
  
    let totalPrice = 0;
    rows.forEach(row => {
        const price = row.cells[4]?.textContent?.replace(/[^\d]/g, "") || "0";
        totalPrice += parseInt(price) || 0;
    });
    document.getElementById("auditTotalPrice").textContent = totalPrice.toLocaleString();
    
}

function printAuditOnly() {
  const auditTable = document.getElementById("auditLogTable").outerHTML;
  const w = window.open("", "", "width=800,height=600");
  w.document.write("<html><head><title>ุทุจุงุนุฉ ุณุฌู ุงูุชุฏููู</title></head><body>");
  w.document.write("<h2>ุณุฌู ุงูุชุฏููู</h2>");
  w.document.write(auditTable);
  w.document.write("</body></html>");
  w.document.close();
  w.print();
}

document.getElementById("points").addEventListener("keydown", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    calculateAndSave();
  }
});

document.addEventListener("keydown", function(e) {
  const active = document.activeElement;
  if (!active || !active.isContentEditable) return;

  const td = active;
  const tr = td.parentElement;
  const rowIndex = tr.rowIndex;
  const cellIndex = td.cellIndex;

  let target;
  if (e.key === "ArrowDown") {
    const nextRow = tr.nextElementSibling;
    if (nextRow) target = nextRow.cells[cellIndex];
  } else if (e.key === "ArrowUp") {
    const prevRow = tr.previousElementSibling;
    if (prevRow && prevRow.rowIndex > 0) target = prevRow.cells[cellIndex];
  } else if (e.key === "ArrowLeft") {
    if (cellIndex > 0) target = tr.cells[cellIndex - 1];
  } else if (e.key === "ArrowRight") {
    if (cellIndex < tr.cells.length - 1) target = tr.cells[cellIndex + 1];
  }

  if (target && target.isContentEditable) {
    e.preventDefault();
    target.focus();
  }
});


const topInputs = Array.from(document.querySelectorAll('#accountant, #username, #ref, #points'));

topInputs.forEach((input, idx) => {
  input.addEventListener('keydown', function (e) {
    if (e.key === 'ArrowDown' && idx < topInputs.length - 1) {
      e.preventDefault();
      topInputs[idx + 1].focus();
    } else if (e.key === 'ArrowUp' && idx > 0) {
      e.preventDefault();
      topInputs[idx - 1].focus();
    }
  });
});


// ุชูุณูู ุฅุฏุฎุงู ุงููุงุตุฉ ุจุงูููุงุตู
document.addEventListener("DOMContentLoaded", function () {
  const safeInput = document.getElementById("safeAmount");
  safeInput.addEventListener("input", function () {
    let raw = this.value.replace(/[^\d]/g, "");
    this.value = parseInt(raw || "0").toLocaleString();
  });
});


function saveAuditLog() {
  const rows = document.querySelectorAll("#auditLogTable tbody tr");
  const data = [];

  rows.forEach(row => {
    const cells = row.querySelectorAll("td");
    data.push({
      ุงูุชุงุฑูุฎ: cells[0]?.textContent.trim(),
      ุงููุณุชุฎุฏู: cells[1]?.textContent.trim(),
      ุงูุฑูุฒ: cells[2]?.textContent.trim(),
      ุงูููุงุท: cells[3]?.textContent.trim(),
      ุงูุณุนุฑ: cells[4]?.textContent.trim(),
      ูุฑุงุฌุนุฉ: cells[5]?.textContent.trim(),
      ุงููุญุงุณุจ: cells[6]?.textContent.trim()
    });
  });

  const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "ุณุฌู_ุงูุชุฏููู.json";
  a.click();
  URL.revokeObjectURL(url);
}


function addSafeLog() {
  const source = document.getElementById("safeSource").value.trim();
  const addAmountInput = document.getElementById("safeAddAmount");
  const amount = parseInt(addAmountInput.value.replace(/[^\d]/g, "")) || 0;
  if (!amount || amount <= 0 || !source) {
    alert("ูุฑุฌู ุฅุฏุฎุงู ูุตุฏุฑ ุตุญูุญ ููุจูุบ ุฃูุจุฑ ูู ุตูุฑ.");
    return;
  }

  const safeInput = document.getElementById("safeAmount");
  let safeAmount = parseInt(safeInput.value.replace(/[^\d]/g, "")) || 0;
  safeAmount += amount;
  safeInput.value = safeAmount.toLocaleString();

  const table = document.querySelector("#safeLogTable tbody");
  const row = document.createElement("tr");
  row.innerHTML = `
    <td contenteditable="true">${new Date().toLocaleString("ar-EG")}</td>
    <td contenteditable="true">ุฅุถุงูุฉ</td>
    <td contenteditable="true">${amount.toLocaleString()}</td>
    <td contenteditable="true">${source}</td>
  `;
  table.insertBefore(row, table.firstChild);

  addAmountInput.value = "";
  document.getElementById("safeSource").value = "";
}

// ุชุนุฏูู ุฏุงูุฉ ุฎุตู ุงููุงุตุฉ ูุชุณุฌูู ุงูุฎุตู ููุตุฏุฑ ุชููุงุฆู
const originalCalculateAndSave = calculateAndSave;
calculateAndSave = function() {
  const username = document.getElementById("username").value;
  const ref = document.getElementById("ref").value;
  const accountant = document.getElementById("accountant").value;
  const pointsInput = document.getElementById("points");
  const points = parseInt(pointsInput.value.replace(/[^\d]/g, "")) || 0;
  const resultElem = document.getElementById("result");
  const notifyElem = document.getElementById("notification");
  notifyElem.textContent = "";

  if (!points || points <= 0) {
    resultElem.innerText = "โ ูุฑุฌู ุฅุฏุฎุงู ุนุฏุฏ ููุงุท ุตุญูุญ.";
    return;
  }

  const price = Math.round((points / 5000) * 1320);
  const safeInput = document.getElementById("safeAmount");
  let safeAmount = parseInt(safeInput.value.replace(/[^\d]/g, "")) || 0;

  if (price > safeAmount) {
    resultElem.innerText = "โ ูุง ููุฌุฏ ุฑุตูุฏ ูุงูู ูู ุงููุงุตุฉ.";
    return;
  }

  // ุฎุตู ุงูุณุนุฑ ูู ุงููุงุตุฉ
  safeAmount -= price;
  safeInput.value = safeAmount.toLocaleString();

  // ุณุฌู ุฎุตู ุงููุงุตุฉ ุชููุงุฆููุง
  const table = document.querySelector("#safeLogTable tbody");
  const row = document.createElement("tr");
  row.innerHTML = `
    <td contenteditable="true">${new Date().toLocaleString("ar-EG")}</td>
    <td contenteditable="true">ุฎุตู</td>
    <td contenteditable="true">${price.toLocaleString()}</td>
    <td contenteditable="true">${accountant}</td>
  `;
  table.insertBefore(row, table.firstChild);

  resultElem.innerText = price.toLocaleString() + " ุฏููุงุฑ";
  notifyElem.textContent = "โ ุชู ุงุญุชุณุงุจ ุงูุณุนุฑ ูุฅุถุงูุชู ุฅูู ุงูุณุฌู ุจูุฌุงุญ.";

  const logTable = document.querySelector("#logTable tbody");
  const logRow = document.createElement("tr");
  logRow.innerHTML = `
    <td>${new Date().toLocaleString("ar-EG")}</td>
    <td>${username}</td>
    <td>${ref}</td>
    <td>${points.toLocaleString()}</td>
    <td>${price.toLocaleString()}</td>
    <td>โ</td>
  `;
  logTable.insertBefore(logRow, logTable.firstChild);
  reviewUsed = false;
  document.getElementById("reviewBtn").disabled = false;
  pointsInput.value = "";
};


document.addEventListener("keydown", function(e) {
  const active = document.activeElement;
  if (!active || !active.isContentEditable) return;

  const td = active;
  const tr = td.parentElement;
  const rowIndex = tr.rowIndex;
  const cellIndex = td.cellIndex;

  let target;
  if (e.key === "ArrowDown") {
    const nextRow = tr.nextElementSibling;
    if (nextRow) target = nextRow.cells[cellIndex];
  } else if (e.key === "ArrowUp") {
    const prevRow = tr.previousElementSibling;
    if (prevRow && prevRow.rowIndex > 0) target = prevRow.cells[cellIndex];
  } else if (e.key === "ArrowLeft") {
    if (cellIndex > 0) target = tr.cells[cellIndex - 1];
  } else if (e.key === "ArrowRight") {
    if (cellIndex < tr.cells.length - 1) target = tr.cells[cellIndex + 1];
  }

  if (target && target.isContentEditable) {
    e.preventDefault();
    target.focus();
  }
});

</script>


</body></html>